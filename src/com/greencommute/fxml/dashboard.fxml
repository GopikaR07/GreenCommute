<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.greencommute.controller.DashboardController"
            styleClass="root">

    <!-- Top Bar -->
    <top>
        <HBox styleClass="top-bar" spacing="20" alignment="CENTER_LEFT">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>
            <Label fx:id="welcomeLabel" text="Welcome!" styleClass="welcome-text"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="pointsLabel" text="Points: 0" styleClass="points-label"/>
            <Label fx:id="tierLabel" text="Tier: Bronze" styleClass="tier-label"/>
            <Button text="Logout" onAction="#onLogout" styleClass="logout-btn"/>
        </HBox>
    </top>

    <!-- Main Content with TabPane -->
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE" styleClass="main-tabs">

            <!-- HOME TAB -->
            <Tab text="ðŸ  Home">
                <ScrollPane fitToWidth="true" styleClass="scroll-pane">
                    <VBox spacing="20" styleClass="content-container">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <!-- Stats Cards Row -->
                        <HBox spacing="15" alignment="CENTER">
                            <VBox styleClass="stat-card">
                                <Label text="Current Streak" styleClass="stat-label"/>
                                <Label fx:id="streakLabel" text="0 days" styleClass="stat-value"/>
                            </VBox>
                            <VBox styleClass="stat-card">
                                <Label text="Weekly Goal" styleClass="stat-label"/>
                                <ProgressBar fx:id="weeklyGoalProgress" prefWidth="200" styleClass="progress-bar"/>
                                <Label fx:id="weeklyGoalLabel" text="0/5 trips" styleClass="stat-sublabel"/>
                            </VBox>
                        </HBox>

                        <!-- Challenges Section -->
                        <VBox spacing="10">
                            <Label text="ðŸŽ¯ Active Challenges" styleClass="section-title"/>
                            <ScrollPane fitToWidth="true" prefHeight="250" styleClass="inner-scroll">
                                <VBox fx:id="challengesBox" spacing="10"/>
                            </ScrollPane>
                        </VBox>

                        <!-- Recent Trips -->
                        <VBox spacing="10">
                            <Label text="ðŸš€ Recent Trips" styleClass="section-title"/>
                            <VBox fx:id="recentTripsBox" spacing="5" styleClass="recent-trips-box"/>
                        </VBox>

                        <!-- Quick Actions -->
                        <HBox spacing="15" alignment="CENTER">
                            <Button text="ðŸ“ Plan New Trip" styleClass="action-btn"
                                    onAction="#onPlanTrip" prefWidth="200"/>
                            <Button text="ðŸ“ Log Trip" styleClass="action-btn-alt" prefWidth="200"/>
                        </HBox>
                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- TRIP PLANNER TAB -->
            <Tab text="ðŸ—ºï¸ Trip Planner">
                <ScrollPane fitToWidth="true" styleClass="scroll-pane">
                    <VBox spacing="20" styleClass="content-container">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <Label text="Plan Your Green Commute" styleClass="page-title"/>

                        <!-- Input Section -->
                        <VBox spacing="12" styleClass="input-section">
                            <Label text="Enter Trip Details" styleClass="section-title"/>
                            <HBox spacing="15" alignment="CENTER_LEFT">
                                <VBox spacing="5">
                                    <Label text="From:" styleClass="input-label"/>
                                    <TextField fx:id="tripFromField" promptText="Start location"
                                               prefWidth="250" styleClass="input-field"/>
                                </VBox>
                                <VBox spacing="5">
                                    <Label text="To:" styleClass="input-label"/>
                                    <TextField fx:id="tripToField" promptText="Destination"
                                               prefWidth="250" styleClass="input-field"/>
                                </VBox>
                                <VBox spacing="5">
                                    <Label text="Distance (km):" styleClass="input-label"/>
                                    <TextField fx:id="tripDistanceField" promptText="e.g., 5.5"
                                               prefWidth="120" styleClass="input-field"/>
                                </VBox>
                                <Button text="ðŸ” Find Routes" onAction="#onPlanTrip"
                                        styleClass="action-btn" prefHeight="40"/>
                            </HBox>
                        </VBox>

                        <!-- Recommended Trips -->
                        <VBox spacing="15">
                            <Label text="ðŸŒŸ Recommended Green Options" styleClass="section-title"/>
                            <ScrollPane fitToWidth="true" prefHeight="500" styleClass="inner-scroll">
                                <VBox fx:id="recommendedTripsBox" spacing="12"/>
                            </ScrollPane>
                        </VBox>
                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- REWARDS TAB -->
            <Tab text="ðŸŽ Rewards">
                <ScrollPane fitToWidth="true" styleClass="scroll-pane">
                    <VBox spacing="20" styleClass="content-container">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <Label text="Rewards & Redemption" styleClass="page-title"/>
                        <Label fx:id="availablePointsLabel" text="Available Points: 0"
                               styleClass="points-display"/>

                        <!-- Rewards List -->
                        <VBox spacing="15">
                            <Label text="ðŸ’° Available Rewards" styleClass="section-title"/>
                            <ScrollPane fitToWidth="true" prefHeight="400" styleClass="inner-scroll">
                                <VBox fx:id="rewardsListBox" spacing="12"/>
                            </ScrollPane>
                        </VBox>

                        <!-- Redemption History -->
                        <VBox spacing="10">
                            <Label text="ðŸ“œ Redemption History" styleClass="section-title"/>
                            <TextArea fx:id="rewardHistoryArea" prefHeight="150" editable="false"
                                      styleClass="history-area"/>
                        </VBox>
                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- CO2 TRACKER TAB -->
            <Tab text="ðŸŒ COâ‚‚ Tracker">
                <ScrollPane fitToWidth="true" styleClass="scroll-pane">
                    <VBox spacing="20" styleClass="content-container">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <Label text="Carbon Footprint Tracker" styleClass="page-title"/>

                        <!-- Total Stats -->
                        <HBox spacing="30" alignment="CENTER">
                            <VBox styleClass="co2-stat-card" alignment="CENTER">
                                <Label fx:id="totalCO2Label" text="Total COâ‚‚ Saved: 0 kg"
                                       styleClass="co2-stat-value"/>
                            </VBox>
                            <VBox styleClass="co2-stat-card" alignment="CENTER">
                                <Label fx:id="treesEquivLabel" text="Equivalent to 0 trees! ðŸŒ³"
                                       styleClass="co2-stat-value"/>
                            </VBox>
                        </HBox>

                        <!-- Eco Calculator -->
                        <VBox spacing="15" styleClass="calculator-section">
                            <Label text="ðŸ§® Eco Calculator" styleClass="section-title"/>
                            <HBox spacing="15" alignment="CENTER_LEFT">
                                <VBox spacing="5">
                                    <Label text="Distance (km):" styleClass="input-label"/>
                                    <TextField fx:id="ecoDistanceField" promptText="Enter distance"
                                               prefWidth="150" styleClass="input-field"/>
                                </VBox>
                                <VBox spacing="5">
                                    <Label text="Transport Mode:" styleClass="input-label"/>
                                    <ComboBox fx:id="ecoModeCombo" prefWidth="150" styleClass="combo-box"/>
                                </VBox>
                                <Button text="Calculate" onAction="#onCalculateCO2"
                                        styleClass="action-btn" prefHeight="40"/>
                            </HBox>
                            <Label fx:id="ecoResultLabel" text="" styleClass="eco-result"/>
                        </VBox>

                        <!-- Impact Visualization -->
                        <VBox spacing="10" styleClass="impact-section">
                            <Label text="ðŸ“Š Your Environmental Impact" styleClass="section-title"/>
                            <Label text="Every green commute makes a difference!"
                                   styleClass="impact-text"/>
                            <Label text="â€¢ Reduces air pollution" styleClass="impact-item"/>
                            <Label text="â€¢ Decreases carbon emissions" styleClass="impact-item"/>
                            <Label text="â€¢ Promotes sustainable living" styleClass="impact-item"/>
                            <Label text="â€¢ Inspires others to go green" styleClass="impact-item"/>
                        </VBox>
                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- LOG TRIP TAB -->
            <Tab text="ðŸ“ Log Trip">
                <ScrollPane fitToWidth="true" styleClass="scroll-pane">
                    <VBox spacing="20" styleClass="content-container">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <Label text="Log Your Green Commute" styleClass="page-title"/>

                        <!-- Log Form -->
                        <VBox spacing="15" styleClass="log-form">
                            <HBox spacing="15">
                                <VBox spacing="5">
                                    <Label text="Date:" styleClass="input-label"/>
                                    <DatePicker fx:id="logDatePicker" prefWidth="200" styleClass="date-picker"/>
                                </VBox>
                                <VBox spacing="5">
                                    <Label text="Transport Mode:" styleClass="input-label"/>
                                    <ComboBox fx:id="logModeCombo" prefWidth="200" styleClass="combo-box"/>
                                </VBox>
                            </HBox>

                            <HBox spacing="15">
                                <VBox spacing="5">
                                    <Label text="From:" styleClass="input-label"/>
                                    <TextField fx:id="logFromField" promptText="Start location"
                                               prefWidth="300" styleClass="input-field"/>
                                </VBox>
                                <VBox spacing="5">
                                    <Label text="To:" styleClass="input-label"/>
                                    <TextField fx:id="logToField" promptText="Destination"
                                               prefWidth="300" styleClass="input-field"/>
                                </VBox>
                            </HBox>

                            <HBox spacing="15">
                                <VBox spacing="5">
                                    <Label text="Distance (km):" styleClass="input-label"/>
                                    <TextField fx:id="logDistanceField" promptText="e.g., 5.5"
                                               prefWidth="150" styleClass="input-field"/>
                                </VBox>
                                <VBox spacing="5">
                                    <Label text="Duration (min):" styleClass="input-label"/>
                                    <TextField fx:id="logDurationField" promptText="e.g., 30"
                                               prefWidth="150" styleClass="input-field"/>
                                </VBox>
                            </HBox>

                            <Button text="âœ… Log This Trip" onAction="#onLogTrip"
                                    styleClass="submit-btn" prefWidth="250" prefHeight="45"/>

                            <Label fx:id="logStatusLabel" text="" styleClass="status-label"/>
                        </VBox>
                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- HISTORY TAB -->
            <Tab text="ðŸ“š History">
                <ScrollPane fitToWidth="true" styleClass="scroll-pane">
                    <VBox spacing="20" styleClass="content-container">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <Label text="Commute History" styleClass="page-title"/>

                        <TableView fx:id="commuteTable" styleClass="history-table">
                            <columns>
                                <TableColumn fx:id="dateCol" text="Date" prefWidth="100"/>
                                <TableColumn fx:id="fromCol" text="From" prefWidth="150"/>
                                <TableColumn fx:id="toCol" text="To" prefWidth="150"/>
                                <TableColumn fx:id="modeCol" text="Mode" prefWidth="100"/>
                                <TableColumn fx:id="distanceCol" text="Distance (km)" prefWidth="120"/>
                                <TableColumn fx:id="durationCol" text="Duration (min)" prefWidth="130"/>
                                <TableColumn fx:id="co2Col" text="COâ‚‚ Saved (kg)" prefWidth="130"/>
                                <TableColumn fx:id="pointsCol" text="Points" prefWidth="80"/>
                            </columns>
                        </TableView>
                    </VBox>
                </ScrollPane>
            </Tab>

        </TabPane>
    </center>

</BorderPane>